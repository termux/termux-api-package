#!@TERMUX_PREFIX@/bin/sh
set -e -u

SCRIPTNAME=termux-battery-status
show_usage () {
    echo "Usage: $SCRIPTNAME"
    echo "Get the status of the device battery."
    echo "  -t, set timeout for getting information (default: unlimited)"
    exit 0
}

TIMEOUT=0
while getopts :ht: option
do
    case "$option" in
        h) show_usage;;
        t) TIMEOUT="$OPTARG";;
        ?) echo "$SCRIPTNAME: illegal option -$OPTARG"; exit 1;
    esac
done
shift $((OPTIND-1))

if [ $# != 0 ]; then echo "$SCRIPTNAME: too many arguments"; exit 1; fi

timeout "$TIMEOUT" @TERMUX_PREFIX@/libexec/termux-api BatteryStatus
